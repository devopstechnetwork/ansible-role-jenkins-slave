---
- name: Install jenkins slave requirements
  win_chocolatey:
    name: "{{ jenkins_slave_requirements }}"
    state: present
  when: jenkins_slave_requirements | default([]) | length > 0

- name: Create jenkins slave user
  win_user:
    name: "{{ jenkins_slave_username }}"
    password: "{{ jenkins_slave_password }}"
    update_password: always
    state: present

- name: Create jenkins slave home directory
  win_file:
    path: "{{ jenkins_slave_home }}"
    state: directory

- import_tasks: service.yml
